"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["62299"],{22742:function(e,t,n){n.d(t,{ZP:function(){return o},d$:function(){return i}});var a=n(85893),r=n(50065);let i=[];function l(e){let t={a:"a",admonition:"admonition",code:"code",li:"li",p:"p",ul:"ul",...(0,r.a)(),...e.components},{Details:n}=t;return n||function(e,t){throw Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,a.jsxs)(n,{children:[(0,a.jsx)("summary",{children:"How to use the code sample"}),(0,a.jsx)("strong",{children:"The code presented below requires:"}),(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["That ",(0,a.jsx)(t.code,{children:"createChart"})," has already been imported. See ",(0,a.jsx)(t.a,{href:"/docs#creating-a-chart",children:"Getting Started"})," for more information,"]}),"\n",(0,a.jsxs)(t.li,{children:["and that there is an html div element on the page with an ",(0,a.jsx)(t.code,{children:"id"})," of ",(0,a.jsx)(t.code,{children:"container"}),"."]}),"\n"]}),(0,a.jsxs)(t.p,{children:["Here is an example skeleton setup: ",(0,a.jsx)(t.a,{href:"https://codesandbox.io/s/lightweight-charts-skeleton-n67pm6",children:"Code Sandbox"}),".\nYou can paste the provided code below the ",(0,a.jsx)(t.code,{children:"// REPLACE EVERYTHING BELOW HERE"})," comment."]}),(0,a.jsx)(t.admonition,{type:"tip",children:(0,a.jsx)(t.p,{children:"Some code may be hidden to improve readability. Toggle the checkbox above the code block to reveal all the code."})})]})}function o(e={}){let{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},95042:function(e,t,n){n.r(t),n.d(t,{default:()=>p,frontMatter:()=>s,metadata:()=>a,assets:()=>c,toc:()=>h,contentTitle:()=>d});var a=JSON.parse('{"id":"demos/realtime-updates","title":"Realtime updates","description":"An example of how to handle realtime updates","source":"@site/tutorials/demos/realtime-updates.mdx","sourceDirName":"demos","slug":"/demos/realtime-updates","permalink":"/lightweight-charts/tutorials/demos/realtime-updates","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Realtime updates","sidebar_label":"Realtime updates","description":"An example of how to handle realtime updates","pagination_prev":null,"pagination_next":null,"keywords":["realtime updates"]},"sidebar":"tutorialsSidebar"}'),r=n("85893"),i=n("50065"),l=n("22742"),o=n("30353");let s={title:"Realtime updates",sidebar_label:"Realtime updates",description:"An example of how to handle realtime updates",pagination_prev:null,pagination_next:null,keywords:["realtime updates"]},d=void 0,c={},h=[];function u(e){let t={a:"a",code:"code",p:"p",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["This sample demonstrates how to mimic real-time updates on a candlestick chart\nwith Lightweight Charts\u2122. The chart initially populates with some historical\ndata. By using ",(0,r.jsx)(t.code,{children:"setInterval"})," function, the chart then begins to receive\nsimulated real-time updates with the usage of ",(0,r.jsx)(t.code,{children:"series.update(...)"}),"."]}),"\n",(0,r.jsxs)(t.p,{children:['Each real-time update represents a new data point or modifies the latest point,\nproviding the illusion of a live, updating chart. If you scroll the chart and\nwish to return to the latest data points then you can use the "Go to realtime"\nbutton provided which calls the\n',(0,r.jsx)(t.a,{href:"/docs/api/interfaces/ITimeScaleApi#scrolltorealtime",children:(0,r.jsx)(t.code,{children:"scrollToRealtime"})})," method\non the timescale."]}),"\n","\n",(0,r.jsx)(o.ZP,{replaceThemeConstants:!0,chart:!0,className:"language-js",hideableCode:!0,chartOnTop:!0,codeUsage:(0,r.jsx)(l.ZP,{}),children:"// remove-start\n// Lightweight Charts\u2122 Example: Realtime updates\n// https://tradingview.github.io/lightweight-charts/tutorials/demos/realtime-updates\n\n// remove-end\n\n// hide-start\nlet randomFactor = 25 + Math.random() * 25;\nconst samplePoint = i =>\n	i *\n		(0.5 +\n			Math.sin(i / 1) * 0.2 +\n			Math.sin(i / 2) * 0.4 +\n			Math.sin(i / randomFactor) * 0.8 +\n			Math.sin(i / 50) * 0.5) +\n	200 +\n	i * 2;\n\nfunction generateData(\n	numberOfCandles = 500,\n	updatesPerCandle = 5,\n	startAt = 100\n) {\n	const createCandle = (val, time) => ({\n		time,\n		open: val,\n		high: val,\n		low: val,\n		close: val,\n	});\n\n	const updateCandle = (candle, val) => ({\n		time: candle.time,\n		close: val,\n		open: candle.open,\n		low: Math.min(candle.low, val),\n		high: Math.max(candle.high, val),\n	});\n\n	randomFactor = 25 + Math.random() * 25;\n	const date = new Date(Date.UTC(2018, 0, 1, 12, 0, 0, 0));\n	const numberOfPoints = numberOfCandles * updatesPerCandle;\n	const initialData = [];\n	const realtimeUpdates = [];\n	let lastCandle;\n	let previousValue = samplePoint(-1);\n	for (let i = 0; i < numberOfPoints; ++i) {\n		if (i % updatesPerCandle === 0) {\n			date.setUTCDate(date.getUTCDate() + 1);\n		}\n		const time = date.getTime() / 1000;\n		let value = samplePoint(i);\n		const diff = (value - previousValue) * Math.random();\n		value = previousValue + diff;\n		previousValue = value;\n		if (i % updatesPerCandle === 0) {\n			const candle = createCandle(value, time);\n			lastCandle = candle;\n			if (i >= startAt) {\n				realtimeUpdates.push(candle);\n			}\n		} else {\n			const newCandle = updateCandle(lastCandle, value);\n			lastCandle = newCandle;\n			if (i >= startAt) {\n				realtimeUpdates.push(newCandle);\n			} else if ((i + 1) % updatesPerCandle === 0) {\n				initialData.push(newCandle);\n			}\n		}\n	}\n\n	return {\n		initialData,\n		realtimeUpdates,\n	};\n}\n\nconst chartOptions = {\n	layout: {\n		textColor: CHART_TEXT_COLOR,\n		background: { type: 'solid', color: CHART_BACKGROUND_COLOR },\n	},\n	height: 200,\n};\n// hide-end\nconst container = document.getElementById('container');\n// remove-line\n/** @type {import('lightweight-charts').IChartApi} */\nconst chart = createChart(container, chartOptions);\n\n// remove-start\n// Only needed within demo page\n// eslint-disable-next-line no-undef\nwindow.addEventListener('resize', () => {\n	chart.applyOptions({ height: 200 });\n});\n// remove-end\n\nconst series = chart.addSeries(CandlestickSeries, {\n	upColor: BAR_UP_COLOR,\n	downColor: BAR_DOWN_COLOR,\n	borderVisible: false,\n	wickUpColor: BAR_UP_COLOR,\n	wickDownColor: BAR_DOWN_COLOR,\n});\n\nconst data = generateData(2500, 20, 1000);\n\nseries.setData(data.initialData);\nchart.timeScale().fitContent();\nchart.timeScale().scrollToPosition(5);\n\n// simulate real-time data\nfunction* getNextRealtimeUpdate(realtimeData) {\n	for (const dataPoint of realtimeData) {\n		yield dataPoint;\n	}\n	return null;\n}\nconst streamingDataProvider = getNextRealtimeUpdate(data.realtimeUpdates);\n\nconst intervalID = setInterval(() => {\n	const update = streamingDataProvider.next();\n	if (update.done) {\n		clearInterval(intervalID);\n		return;\n	}\n	series.update(update.value);\n}, 100);\n\n// hide-start\nconst styles = `\n    .buttons-container {\n        display: flex;\n        flex-direction: row;\n        gap: 8px;\n    }\n    .buttons-container button {\n        all: initial;\n        font-family: -apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu,\n            sans-serif;\n        font-size: 16px;\n        font-style: normal;\n        font-weight: 510;\n        line-height: 24px; /* 150% */\n        letter-spacing: -0.32px;\n        padding: 8px 24px;\n        color: rgba(19, 23, 34, 1);\n        background-color: rgba(240, 243, 250, 1);\n        border-radius: 8px;\n        cursor: pointer;\n    }\n\n    .buttons-container button:hover {\n        background-color: rgba(224, 227, 235, 1);\n    }\n\n    .buttons-container button:active {\n        background-color: rgba(209, 212, 220, 1);\n    }\n`;\n\nconst stylesElement = document.createElement('style');\nstylesElement.innerHTML = styles;\ncontainer.appendChild(stylesElement);\n\nconst buttonsContainer = document.createElement('div');\nbuttonsContainer.classList.add('buttons-container');\n// hide-end\nconst button = document.createElement('button');\nbutton.innerText = 'Go to realtime';\nbutton.addEventListener('click', () => chart.timeScale().scrollToRealTime());\nbuttonsContainer.appendChild(button);\n\ncontainer.appendChild(buttonsContainer);\n"})]})}function p(e={}){let{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},30353:function(e,t,n){n.d(t,{ZP:()=>b});var a=n("85893"),r=n("67294"),i=n("31705"),l=n("44634"),o=n("79207"),s=n("57378"),d=n("6646");function c(e,t,n){e.addEventListener("resize",()=>{let e=t.getBoundingClientRect();n(e.width,e.height)},!0)}let h={3.8:async e=>{let t=await n.e("70967").then(n.bind(n,51083));return{module:t,createChart:(n,a)=>{let r=t.createChart(n,a);return c(e,n,r.resize.bind(r)),r},createChartEx:void 0,createYieldCurveChart:void 0,createOptionsChart:void 0}},"4.0":async e=>{let t=await n.e("98966").then(n.bind(n,11413));return{module:t,createChart:(n,a)=>{let r=t.createChart(n,a);return c(e,n,r.resize.bind(r)),r},createChartEx:void 0,createYieldCurveChart:void 0,createOptionsChart:void 0}},4.1:async e=>{let t=await n.e("85998").then(n.bind(n,1860));return{module:t,createChart:(n,a)=>{let r=t.createChart(n,a);return c(e,n,r.resize.bind(r)),r},createChartEx:(n,a,r)=>{let i=t.createChartEx(n,a,r);return c(e,n,i.resize.bind(i)),i},createYieldCurveChart:void 0,createOptionsChart:void 0}},4.2:async e=>{let t=await n.e("15373").then(n.bind(n,15757));return{module:t,createChart:(n,a)=>{let r=t.createChart(n,a);return c(e,n,r.resize.bind(r)),r},createChartEx:(n,a,r)=>{let i=t.createChartEx(n,a,r);return c(e,n,i.resize.bind(i)),i},createYieldCurveChart:void 0,createOptionsChart:void 0}},"5.0":async e=>{let t=await n.e("11191").then(n.bind(n,96473));return{module:t,createChart:(n,a)=>{let r=t.createChart(n,a);return c(e,n,r.resize.bind(r)),r},createChartEx:(n,a,r)=>{let i=t.createChartEx(n,a,r);return c(e,n,i.resize.bind(i)),i},createYieldCurveChart:(n,a)=>{let r=t.createYieldCurveChart(n,a);return c(e,n,r.resize.bind(r)),r},createOptionsChart:(n,a)=>{let r=t.createOptionsChart(n,a);return c(e,n,r.resize.bind(r)),r}}},current:async()=>{let e=await n.e("22433").then(n.bind(n,3768));return{module:e,createChart:(t,n)=>{let a=e.createChart(t,n);return c(window,t,a.resize.bind(a)),a},createChartEx:(t,n,a)=>{let r=e.createChartEx(t,n,a);return c(window,t,r.resize.bind(r)),r},createYieldCurveChart:(t,n)=>{let a=e.createYieldCurveChart(t,n);return c(window,t,a.resize.bind(a)),a},createOptionsChart:(t,n)=>{let a=e.createOptionsChart(t,n);return c(window,t,a.resize.bind(a)),a}}}},u={iframe:"iframe_R_Fr"};function p(e){let{script:t,iframeStyle:n}=e,{preferredVersion:i}=(0,s.J)(),l=d&&d.length>0?d["0"]:"",o=i?.name??l??"current",c=`
		<style>
			html,
			body,
			#container {
				width: 100%;
				height: 100%;
				overflow: hidden;
				margin: 0;
			}
		</style>
		<div id="container"></div>
		<script>
			window.run = () => {
				${t}
			};
		</script>
	`,p=r.useRef(null);return r.useEffect(()=>{let e=p.current,t=e?.contentWindow,n=e?.contentDocument;if(null===e||!t||!n)return;let a=async()=>{try{let{module:e,createChart:n,createChartEx:a,createYieldCurveChart:r,createOptionsChart:i}=await h[o](t);Object.assign(t,e),t.createChart=n,t.createChartEx=a,t.createYieldCurveChart=r,t.createOptionsChart=i,"current"===o&&(t.LineSeries=e.LineSeries,t.AreaSeries=e.AreaSeries,t.CandlestickSeries=e.CandlestickSeries,t.BarSeries=e.BarSeries,t.HistogramSeries=e.HistogramSeries),t.run?.()}catch(e){console.error(e)}};if(void 0!==t.run)a();else{let t=()=>{a(),e.removeEventListener("load",t)};e.addEventListener("load",t)}},[c]),(0,a.jsx)("iframe",{ref:p,srcDoc:c,className:u.iframe,style:n},t)}var m=n("98159");let C=()=>`${Math.random().toString(36).slice(2,11)}`,O=Object.keys(m.l.DARK),b=e=>{let{chart:t,replaceThemeConstants:n,hideableCode:s,chartOnly:d,chartOnTop:c=!1,iframeStyle:h,replaceTabs:b=!0,codeUsage:L,...g}=e,{children:_}=e,{colorMode:f}=(0,o.I)(),R=function(){let[e,t]=(0,r.useState)("");return(0,r.useEffect)(()=>t(C()),[]),e}();if(n&&"string"==typeof _&&(_=function(e,t){let n=t?m.l.DARK:m.l.LIGHT,a=e;for(let e of O)a=a.replace(RegExp(e,"g"),`'${n[e]}'`);return a}(_,"dark"===f)),b&&"string"==typeof _&&(_=_.replace(/\t/g,"    ")),_=_.replace(RegExp(/\/\/ delete-start[\w\W]*?\/\/ delete-end/,"gm"),""),t||s){let e=!d&&(0,a.jsx)(i.Z,{...g,children:_}),n=t&&(0,a.jsx)(l.Z,{fallback:(0,a.jsx)("div",{className:u.iframe,children:"\xa0"}),children:()=>(0,a.jsx)(p,{script:_,iframeStyle:h})}),r=s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{id:R,type:"checkbox",className:"toggle-hidden-lines"}),(0,a.jsx)("label",{className:"toggle-label",htmlFor:R,children:"Show all code"})]});return c?(0,a.jsxs)(a.Fragment,{children:[n,L,r,e]}):(0,a.jsxs)(a.Fragment,{children:[L,r,e,n]})}return(0,a.jsx)(i.Z,{...g,children:_})}},98159:function(e,t,n){n.d(t,{l:function(){return a}});let a={DARK:{CHART_BACKGROUND_COLOR:"black",CHART_BACKGROUND_RGB_COLOR:"0, 0, 0",LINE_LINE_COLOR:"#2962FF",LINE_LINE2_COLOR:"rgb(225, 87, 90)",LINE_LINE3_COLOR:"rgb(242, 142, 44)",LINE_LINE4_COLOR:"rgb(164, 89, 209)",LINE_LINE5_COLOR:"rgb(27, 156, 133)",AREA_TOP_COLOR:"#2962FF",AREA_BOTTOM_COLOR:"rgba(41, 98, 255, 0.28)",BAR_UP_COLOR:"#26a69a",BAR_DOWN_COLOR:"#ef5350",BASELINE_TOP_LINE_COLOR:"rgba( 38, 166, 154, 1)",BASELINE_TOP_FILL_COLOR1:"rgba( 38, 166, 154, 0.28)",BASELINE_TOP_FILL_COLOR2:"rgba( 38, 166, 154, 0.05)",BASELINE_BOTTOM_LINE_COLOR:"rgba( 239, 83, 80, 1)",BASELINE_BOTTOM_FILL_COLOR1:"rgba( 239, 83, 80, 0.05)",BASELINE_BOTTOM_FILL_COLOR2:"rgba( 239, 83, 80, 0.28)",HISTOGRAM_COLOR:"#26a69a",CHART_TEXT_COLOR:"white"},LIGHT:{CHART_BACKGROUND_COLOR:"white",CHART_BACKGROUND_RGB_COLOR:"255, 255, 255",LINE_LINE_COLOR:"#2962FF",LINE_LINE2_COLOR:"rgb(225, 87, 90)",LINE_LINE3_COLOR:"rgb(242, 142, 44)",LINE_LINE4_COLOR:"rgb(164, 89, 209)",LINE_LINE5_COLOR:"rgb(27, 156, 133)",AREA_TOP_COLOR:"#2962FF",AREA_BOTTOM_COLOR:"rgba(41, 98, 255, 0.28)",BAR_UP_COLOR:"#26a69a",BAR_DOWN_COLOR:"#ef5350",BASELINE_TOP_LINE_COLOR:"rgba( 38, 166, 154, 1)",BASELINE_TOP_FILL_COLOR1:"rgba( 38, 166, 154, 0.28)",BASELINE_TOP_FILL_COLOR2:"rgba( 38, 166, 154, 0.05)",BASELINE_BOTTOM_LINE_COLOR:"rgba( 239, 83, 80, 1)",BASELINE_BOTTOM_FILL_COLOR1:"rgba( 239, 83, 80, 0.05)",BASELINE_BOTTOM_FILL_COLOR2:"rgba( 239, 83, 80, 0.28)",HISTOGRAM_COLOR:"#26a69a",CHART_TEXT_COLOR:"black"}}},6646:function(e){e.exports=JSON.parse('["5.0","4.2","4.1","4.0","3.8"]')}}]);